<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>frontPage</title>
    <link rel="stylesheet" href="../css/bootstrap.css" />
    <link rel="stylesheet" href="../css/frontPage/frontPage.css" />
  </head>
  <body>
    <!-- id="root" -->
    <div class="container border p-0" id="root">
      <div
        class="search-modal-control"
        onclick="cityZoneContainerHandler('remove')"
      ></div>
      <header>
        <div class="header-left">
          <div><button class="btn btn-warning">title</button></div>
          <div class="header-nav">
            <div class="header-nav-item">預約掛號</div>
            <div class="header-nav-item">健康報</div>
            <div class="header-nav-item">商城</div>
            <div class="header-nav-item">APP下載</div>
          </div>
        </div>
        <div class="header-right">
          <button class="btn btn-primary text-white">追蹤臉書</button>
          <button class="btn btn-success text-white">加入LINE</button>
        </div>
      </header>
      <section class="w-100">
        <div class="announce">
          icon HOT 下載愛管家 iCare APP 掛號看診更方便!!
        </div>
        <div class="search-container">
          <div class="search-card">
            <div class="search-card-select">
              <div class="search-card-select-item">找診所</div>
              <div class="search-card-select-item">找附近</div>
              <div class="search-card-select-item">查詢掛號</div>
            </div>
            <div class="search-card-input">
              <div class="input-custom">
                <div
                  class="cityzone"
                  data-bs-container="body"
                  data-bs-toggle="popover"
                  data-bs-placement="left"
                  data-bs-content="Left popover"
                  onclick="cityZoneContainerHandler('open')"
                >
                  <span>
                    <span class="nowCity">台北市</span> /
                    <span class="nowDistrict">內湖區</span></span
                  >
                </div>

                <div class="line"></div>
                <input
                  type="text"
                  class="inputValue"
                  placeholder="Recipient's username"
                  aria-label="Recipient's username"
                  aria-describedby="button-addon2"
                />
              </div>
              <button class="btn btn-success">搜尋</button>
              <div class="cityzone-selectContainer">
                <div class="d-flex flex-wrap area"></div>
                <div class="d-flex flex-wrap city"></div>
                <div class="mainZone-item normal active">區域</div>
                <div class="d-flex district">
                  <div class="minZone-item">不分區</div>
                  <div class="d-flex flex-wrap district-list"></div>
                </div>
              </div>
            </div>
            <div class="search-card-more">
              診所快選 :
              <span class="clinic-btn">家醫科</span
              ><span class="clinic-btn">耳鼻喉科</span
              ><span class="clinic-btn">皮膚科</span
              ><span class="clinic-btn">復健科</span>
            </div>
          </div>
        </div>
      </section>
      <div style="height: 100px; background-color: #f5f5f5"></div>
      <main class="main-container">
        <div class="video-container">
          <div class="title">
            <div class="title-name">醫師開講</div>
            <div class="title-more">查看更多</div>
          </div>
          <dd class="content">
            <div class="video-title">
              濕氣重好疲倦！日中醫：6類食物促發汗排濕，還顧脾健胃
            </div>
            <div class="video">video</div>
          </dd>
        </div>
        <div class="article-container">
          <div class="title">
            <div class="title-name">健康新知</div>
            <div class="title-more">查看更多</div>
          </div>
          <dd class="content">
            <div class="article-item">
              <div class="article-image">image</div>
              <div class="article-title">
                <div class="title">
                  新北高雄各增1例本土猴痘「仍在住院中」超過1.8萬名額登記接種疫苗
                </div>
                <div class="date">2023 年 04 月 12 日</div>
              </div>
            </div>
            <div class="article-item">
              <div class="article-image">image</div>
              <div class="article-title">
                <div class="title">
                  新北高雄各增1例本土猴痘「仍在住院中」超過1.8萬名額登記接種疫苗
                </div>
                <div class="date">2023 年 04 月 12 日</div>
              </div>
            </div>
            <div class="article-item">
              <div class="article-image">image</div>
              <div class="article-title">
                <div class="title">
                  新北高雄各增1例本土猴痘「仍在住院中」超過1.8萬名額登記接種疫苗
                </div>
                <div class="date">2023 年 04 月 12 日</div>
              </div>
            </div>
          </dd>
        </div>
      </main>
      <footer>
        <div class="list">
          <div class="footer-item">臉書粉絲團</div>
          <div class="footer-item">關於愛管家</div>
          <div class="footer-item">服務條款</div>
          <div class="footer-item">隱私權政策</div>
          <div class="footer-item">聯絡客服</div>
        </div>
        <div class="copyright">
          Copyright © 2023 Sprinf iCare Corporation. All rights reserved.
        </div>
      </footer>
    </div>
  </body>
</html>
<script src="../node_modules/jquery/dist/jquery.min.js"></script>
<script src="../node_modules/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
<script src="../js/innerHeight.js"></script>
<script src="../AreaManager.js"></script>
<!-- <script src="../twPartition.json"></script> -->
<!-- <script src="../js/twPartitionHandler.js"></script> -->
<script>
  let manager = new AreaManager();
  manager
    .onAreaChange((initial, items) => {
      areaUIRender(initial, items);
    })
    .onCityChange((initial, items) => {
      cityUIRender(initial, items);
    })
    .onDistrictChange((initial, items) => {
      districtUIRender(initial, items);
    })
    .start();

  function cityZoneContainerHandler(state) {
    let dom = document.querySelector(".cityzone-selectContainer");
    let backgroundDom = document.querySelector(".search-modal-control");
    if (state === "open") {
      dom.classList.toggle("active");
      backgroundDom.classList.add("d-block");
    } else {
      dom.classList.remove("active");
      backgroundDom.classList.remove("d-block");
    }
  }
  function closeModal(params) {
    let dom = document.querySelector(".cityzone-selectContainer");
    dom.classList.remove("active");
  }
  function areaUIRender(initial, items) {
    let dom = document.querySelector(".cityzone-selectContainer .area");
    let str = "";
    items.forEach((item) => {
      str += `<div data-id="${item}" onclick="addrChange('${item}','area')"
      class="mainZone-item normal ${item === `${initial}` ? "active" : ""}">
      ${item}</div>`;
    });
    dom.innerHTML = str;
  }

  function cityUIRender(initial, items) {
    let dom = document.querySelector(".cityzone-selectContainer .city");
    let str = "";
    items.forEach((item) => {
      str += `<div data-id="${item}" onclick="addrChange('${item}','city')"
      class="minZone-item normal ${item === `${initial}` ? "active" : ""}">
      ${item}</div>`;
    });
    dom.innerHTML = str;
    let nowCity = document.querySelector(".cityzone .nowCity");
    nowCity.innerHTML = initial;
  }

  function districtUIRender(initial, items) {
    let dom = document.querySelector(".cityzone-selectContainer .district");
    let firstStr = ``;
    let otherStr = ``;
    items.forEach((item, index) => {
      if (index === 0) {
        firstStr = `<div data-id="${item.text}" onclick="addrChange('${
          item.text
        }','district')"
        class="minZone-item normal ${
          item.text === `${initial}` ? "active" : ""
        }">
        ${item.text}</div>`;
      } else {
        otherStr += `<div data-id="${item.text}" onclick="addrChange('${
          item.text
        }','district')" class="minZone-item normal ${
          item.text === `${initial}` ? "active" : ""
        }">${item.text}</div>`;
      }
    });
    dom.innerHTML = `${firstStr}<div class="d-flex flex-wrap district-list">${otherStr}</div>`;

    let nowDistrict = document.querySelector(".cityzone .nowDistrict");
    nowDistrict.innerHTML = initial;
  }

  function addrChange(item, state) {
    if (state === "area") {
      let dom = document
        .querySelector(".cityzone-selectContainer .area .normal.active")
        .getAttribute("data-id");
      if (item === dom) {
        return;
      }
      manager.selectArea(item);
    } else if (state === "city") {
      let dom = document
        .querySelector(".cityzone-selectContainer .city .normal.active")
        .getAttribute("data-id");
      if (item === dom) {
        return;
      }
      manager.selectCity(item);
    } else {
      let dom = document
        .querySelector(".cityzone-selectContainer .district .normal.active")
        .getAttribute("data-id");
      if (item === dom) {
        return;
      }
      manager.selectDistrict(item);
    }
  }
</script>
